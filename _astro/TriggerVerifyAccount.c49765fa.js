import{S as l}from"./spinner.2c2134ae.js";import{E as x}from"./error.b0194164.js";import{r as o}from"./index.ed373d49.js";import{a as h,T as f}from"./jwt.f0e0aa9c.js";import{h as d}from"./http.82ebf0f1.js";import{j as e}from"./jsx-runtime.391947bd.js";function P(){const[i,a]=o.useState(!0),[r,s]=o.useState(""),m=n=>{a(!0),d("https://api.roadmap.sh/v1-verify-account",{code:n}).then(({response:t,error:c})=>{if(!t?.token){s(c?.message||"Something went wrong. Please try again."),a(!1);return}h.set(f,t.token,{path:"/",expires:30,domain:".roadmap.sh"}),window.location.href="/"}).catch(t=>{a(!1),s("Something went wrong. Please try again.")})};return o.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("code");if(!t){a(!1),s("Something went wrong. Please try again later.");return}m(t)},[]),e.jsx("div",{className:"mx-auto flex max-w-md flex-col items-center pt-0 sm:pt-12",children:e.jsxs("div",{className:"mx-auto max-w-md text-center",children:[i&&e.jsx("img",{alt:"Please wait.",src:l,className:"mx-auto h-16 w-16 animate-spin"}),r&&e.jsx("img",{alt:"Please wait.",src:x,className:"mx-auto h-16 w-16"}),e.jsx("h2",{className:"mb-1 mt-4 text-center text-xl font-semibold sm:mb-3 sm:mt-4 sm:text-2xl",children:"Verifying your account"}),e.jsxs("div",{className:"text-sm sm:text-base",children:[i&&e.jsx("p",{children:"Please wait while we verify your account.."}),r&&e.jsx("p",{className:"text-red-700",children:r})]})]})})}export{P as TriggerVerifyAccount};
